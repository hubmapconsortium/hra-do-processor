id: https://purl.humanatlas.io/specs/collection
name: collection
prefixes:
  ccf: http://purl.org/ccf/
  dcterms: http://purl.org/dc/terms/
  pav: http://purl.org/pav/
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  xsd: http://www.w3.org/2001/XMLSchema#
  obo: http://purl.obolibrary.org/obo/
  linkml: https://w3id.org/linkml/

default_prefix: ccf
default_range: string

imports:
  - linkml:types
  - ../shared/metadata-base

classes:
  Container:
    tree_root: true
    attributes:
      iri:
        range: uriorcurie
      metadata:
        range: CollectionMetadata
      data:
        required: true
        multivalued: true
        inlined_as_list: true
    annotations:
      owl.template: |-
        AnnotationAssertion( dct:title {{iri}} "{{metadata.title|e}}" )
        AnnotationAssertion( dct:description {{iri}} "{{metadata.description|e}}" )
        {% for creator_iri in metadata.created_by %}
        AnnotationAssertion( dct:creator {{iri}} "{{creator_iri|e}}" )
        {% endfor %}
        AnnotationAssertion( schema:version {{iri}} "{{metadata.version|e}}" )
        AnnotationAssertion( schema:dateCreated {{iri}} "{{metadata.creation_date|e}}" )
        AnnotationAssertion( dct:license {{iri}} "{{metadata.license|e}}" )
        AnnotationAssertion( dct:publisher {{iri}} "{{metadata.publisher|e}}" )
        AnnotationAssertion( rdfs:seeAlso {{iri}} "{{metadata.see_also|e}}" )
        AnnotationAssertion( prov:wasDerivedFrom {{iri}} "{{metadata.derived_from|e}}" )  
        {% for member_iri in metadata.had_member %}
        AnnotationAssertion( prov:hadMember {{iri}} "{{member_iri|e}}" )  
        {% endfor %}

  CollectionMetadata:
    mixins:
      - ProvCollection
    class_uri: dcat:Dataset
    slots:
      - title
      - description
      - created_by
      - version
      - creation_date
      - license
      - publisher
      - see_also
      - derived_from

slots:
  created_by:
    required: true
    multivalued: true
    inlined_as_list: true
    range: uriorcurie
    slot_uri: dct:creator
  derived_from:
    range: uriorcurie
    slot_uri: prov:wasDerivedFrom
