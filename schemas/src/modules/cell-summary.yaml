id: https://purl.humanatlas.io/specs/cell-summary
name: cell-summary
prefixes:
  ccf: http://purl.org/ccf/
  oboInOwl: http://www.geneontology.org/formats/oboInOwl#
  loinc: http://purl.bioontology.org/ontology/LNC/
  linkml: https://w3id.org/linkml/
  RO: http://purl.obolibrary.org/obo/RO_
  IAO: http://purl.obolibrary.org/obo/IAO_

default_prefix: ccf
default_range: string

imports:
  - linkml:types
  - ../shared/metadata-base

classes:
  CellSummary:
    class_uri: ccf:CellSummary
    mixins:
      - Named
      - Instance
    slots:
      - annotation_method
      - aggregated_summaries
      - modality
      - donor_sex
      - summary_rows
  
  CellSummaryRow:
    class_uri: ccf:CellSummaryRow
    mixins:
      - Named
      - Instance
    slots:
      - cell_id
      - cell_label
      - gene_expressions
      - count
      - percentage

  GeneExpression:
    class_uri: ccf:GeneExpression
    mixins:
     - Named
     - Instance
    slots:
     - gene_id
     - gene_label
     - ensembl_id
     - mean_gene_expression_value

  CellSummaryData:
    attributes:
      donor:
        required: false
      sample:
        required: false
      dataset:
        required: false
      spatial_entity:
        required: false
      cell_summary:
        multivalued: true
        inlined_as_list: true
        range: CellSummary
      collision:
        required: false
      corridor:
        required: false

  CellSummaryMetadata:
    class_uri: dcat:Dataset
    slots:
      - title
      - description
      - created_by
      - creation_date
      - version
      - license
      - publisher
      - see_also
      - derived_from

  Container:
    tree_root: true
    attributes:
      iri:
      metadata:
      data:
        range: CellSummaryData

slots:
  annotation_method:
    slot_uri: ccf:cell_annotation_method
    required: true
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  aggregated_summaries:
    slot_uri: ccf:aggregates
    required: false
    multivalued: true
    range: uriorcurie
    annotations:
      owl: AnnotationProperty, AnnotationAssertion    
  modality:
    required: true
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  donor_sex:
    required: true
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  summary_rows:
    slot_uri: ccf:has_cell_summary_row
    required: true
    range: CellSummaryRow
    multivalued: true
    inlined_as_list: true
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  cell_id:
    required: true
    range: uriorcurie
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  cell_label:
    required: true
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  gene_expressions:
    required: false
    range: GeneExpression
    multivalued: true
    inlined_as_list: true
    annotations:
      owl: AnnotationProperty, AnnotationAssertion    
  count:
    slot_uri: ccf:cell_count
    required: true
    range: integer
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  percentage:
    slot_uri: ccf:percentage_of_total
    required: true
    range: float
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  gene_id:
    required: true
    range: uriorcurie
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  gene_label:
    required: true
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  ensembl_id:
    required: true
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  mean_gene_expression_value:
    required: true
    range: float
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
