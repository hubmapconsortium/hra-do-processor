id: https://purl.humanatlas.io/specs/donor
name: donor
prefixes:
  ccf: http://purl.org/ccf/
  oboInOwl: http://www.geneontology.org/formats/oboInOwl#
  loinc: http://purl.bioontology.org/ontology/LNC/
  linkml: https://w3id.org/linkml/
  RO: http://purl.obolibrary.org/obo/RO_
  IAO: http://purl.obolibrary.org/obo/IAO_

default_prefix: ccf
default_range: string

imports:
  - linkml:types
  - ../shared/metadata-base

classes:
  Donor:
    class_uri: ccf:Donor
    mixins:
      - Named
      - Instance
    slots:
      - pref_label
      - description
      - external_link
      - age
      - bmi
      - sex
      - sex_id
      - race
      - race_id
      - consortium_name
      - provider_name
      - provider_uuid
      - samples
    slot_usage:
      sex:
        annotations:
          owl.template: |-
            {% if sex %}
            AnnotationAssertion(
              Annotation(oboInOwl:hasDbXref {{sex_id}})
              ccf:sex
              {{id}}
              "{{sex}}"
            )
            {% endif %}
      race:
        annotations:
          owl.template: |-
            {% if race %}
            AnnotationAssertion(
              Annotation(oboInOwl:hasDbXref {{race_id}})
              ccf:has_race
              {{id}}
              "{{race}}"
            )
            {% endif %}
      sex_id:
        pattern: (loinc:LA3-6|loinc:LA2-8|loinc:LA4489-6)
      race_id:
        pattern: (loinc:LA10608-0|loinc:LA6156-9|loinc:LA10610-6|loinc:LA10611-4|loinc:LA4457-3|loinc:LA4489-6)

  DonorData:
    attributes:
      donor:
        multivalued: true
        inlined_as_list: true
        range: Donor
      sample:
        required: false
      dataset:
        required: false
      spatial_entity:
        required: false 

  Container:
    tree_root: true
    attributes:
      iri:
      metadata:
      data:
        range: DonorData

slots:
  external_link:
    slot_uri: ccf:url
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  age:
    range: integer
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  bmi:
    range: float
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  sex:
    annotations:
      owl: AnnotationProperty
  sex_id:
    slot_uri: loinc:46098-0 # Sex
  race:
    slot_uri: ccf:has_race
    annotations:
      owl: AnnotationProperty
  race_id:
    slot_uri: loinc:32624-9 # Race
  consortium_name:
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  provider_name:
    slot_uri: ccf:tissue_provider_name
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  provider_uuid:
    slot_uri: ccf:tissue_provider_uuid
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
  samples:
    slot_uri: ccf:provides
    multivalued: true
    inlined: false
    range: uriorcurie
    annotations:
      owl: AnnotationProperty, AnnotationAssertion
